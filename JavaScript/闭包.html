<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    /* 闭包 —— 一个闭包1） */
    var fn;
    function foo() {
      var a = 2;
      function baz() {
        console.log(a);
      }
      fn = baz;
    }
    function bar() {
      fn();
    }
    foo();
    bar(); // 2
  </script>
  <script>
    /* 闭包 —— 一个闭包2） */
    function foo() {
      var a = 2;

      return function bar() {
        var b = 9;

        return function fn() {
          console.log(a);
        }
      }
    }

    var bar = foo();
    var fn = bar();
    fn();
  </script>
  <script>
    /* 闭包 —— 两个闭包 */
    function foo() {
      var a = 2;

      return function bar() {
        var b = 9;

        return function fn() {
          console.log(a, b);
        }
      }
    }

    var bar = foo();
    var fn = bar();
    fn();
  </script>
  <script>
    /* 闭包 —— 特殊的闭包 */
    function foo() {
      var a = 10;

      const fn1 = () => {
        return a;
      }

      function fn2() {
        return 10;
      }

      fn2();
    }

    foo();
  </script>
  <script>
    /* 闭包 —— 闭包在模块中的应用 */
    (function anonymousFunc () {
      var a = 10;
      var b = 20;
      var test = {
        m: 20,
        add: function (x) {
          return a + x;
        },
        sum: function () {
          return a + b + this.m;
        },
        mark: function (k, j) {
          return k + j;
        }
      }
      window.test = test;
    })();

    // test.add(100);
    test.sum();
    test.mark();

    var _mark = test.mark;
    _mark();
  </script>
  <script>
    console.log(111, b);
    const a = 5;
    var b = 10;
    let c = 20;
    console.log(111, this);
  </script>
</body>
</html>