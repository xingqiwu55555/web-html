# èƒŒåŒ…é—®é¢˜ï¼šä»ç»™å®šçš„æ— åºã€ä¸é‡å¤çš„æ•°ç»„ A ä¸­ï¼Œå–å‡º N ä¸ªæ•°ï¼Œä½¿å…¶ç›¸åŠ å’Œ ä¸º M
```
function getCombBySum(array,sum,tolerance,targetCount){
  /*
  arrayï¼š æ•°æ®æºæ•°ç»„ï¼Œå¿…é€‰ï¼›
  sumï¼š ç›¸åŠ çš„å’Œï¼Œå¿…é€‰ï¼›
  toleranceï¼š å®¹å·®ï¼Œå¦‚æœä¸æŒ‡å®šæ­¤å‚æ•°ï¼Œåˆ™ç›¸åŠ çš„å’Œå¿…é¡»ç­‰äºsumå‚æ•°ï¼ŒæŒ‡å®šæ­¤å‚æ•°å¯ä»¥ä½¿ç»“æœåœ¨å®¹å·®èŒƒå›´å†…æµ®åŠ¨ï¼Œå¯é€‰ï¼›
  targetCountï¼š æ“ä½œæ•°æ•°é‡ï¼Œå¦‚æœä¸æŒ‡å®šæ­¤å‚æ•°ï¼Œåˆ™ç»“æœåŒ…å«æ‰€æœ‰å¯èƒ½çš„æƒ…å†µï¼ŒæŒ‡å®šæ­¤å‚æ•°å¯ä»¥ç­›é€‰å‡ºå›ºå®šæ•°é‡çš„æ•°ç›¸åŠ ï¼Œå‡å¦‚æŒ‡å®šä¸º3ï¼Œé‚£ä¹ˆç»“æœåªåŒ…å«ä¸‰ä¸ªæ•°ç›¸åŠ çš„æƒ…å†µï¼Œå¯é€‰ï¼›
  è¿”å›å€¼ï¼š è¿”å›çš„æ˜¯æ•°ç»„å¥—æ•°ç»„ç»“æ„ï¼Œå†…å±‚æ•°ç»„ä¸­çš„å…ƒç´ æ˜¯æ“ä½œæ•°ï¼Œå¤–å±‚æ•°ç»„ä¸­çš„å…ƒç´ æ˜¯æ‰€æœ‰å¯èƒ½çš„ç»“æœï¼›
  */
  var util = {
    /*
      get combination from array
      arr: target array
      num: combination item length
      return: one array that contain combination arrays
    */
    /*è·å–æ‰€æœ‰çš„å¯èƒ½ç»„åˆ
    å¦‚æœæ˜¯[1,2,3,4,5]å–å‡º3ä¸ª 
    é‚£ä¹ˆå¯èƒ½æ€§å°±æœ‰10ç§ C(5,3)= C(5,2) ä¸æ‡‚çš„æ¶è¡¥é«˜äºŒæ•°å­¦æ’åˆ—ğŸ˜„
    ä¸ç”¨ç¿»ä¹¦äº† ç»™ä¸ªå…¬å¼ 
    å…¨æ’åˆ—  P(n,m)=n!/(n-m)!
    ç»„åˆæ’åˆ— P(n,m)=n!/m!/(n-m)!
    C(5,2)=5!/2!*3!=5*4*3*2*1/[(2*1)*(3*2*1)]=10
    è¿™æ˜¯ä½¿ç”¨äº†å¾ªç¯åŠ é€’å½’åšå‡ºäº†ç»„åˆæ’åº
    */
    getCombination: function(arr, num) {  //  ç´¢å¼•æ•°ç»„ æ“ä½œæ•°æ•°é‡
      var r=[];
      (function f(t,a,n){
          if (n == 0) return r.push(t);
          for (var i=0,l=a.length; i<=l-n; i++) {
              f(t.concat(a[i]), a.slice(i+1), n-1);
        }
      })([],arr,num);
      return r;
    },
    // è·å–æ•°ç»„çš„ç´¢å¼•
    getArrayIndex: function(array) {
      var i = 0,
        r = [];
      for(i = 0;i<array.length;i++){
        r.push(i);
      }
      
      return r;
    }
  },logic = {
    //  å¯¹æ•°ç»„è¿›è¡Œæ’åº
    //  è·å–æ•°ç»„ä¸­æ¯”sumå°çš„æ•°
    init: function(array,sum) {  //åˆå§‹åŒ–å»é™¤ä¸å¯èƒ½çš„å…ƒç´ 
      // clone array
      var _array = array.concat(),
      r = [],
      i = 0;
      // sort by asc
      _array.sort(function(a,b){
        return a - b;
      });
      // å½“å®ƒå°äºæˆ–ç­‰äºæ€»å’Œæ—¶è·å¾—æ‰€æœ‰æ•°å­—
      for(i = 0;i<_array.length;i++){
        if(_array[i]<=sum){
          r.push(_array[i]);
        }else{
          break;
        }
      }
      console.log('åˆå§‹åŒ–åçš„æ•°æ®æº:', r);
      return r;
    },
    // important function
    core: function(array,sum,arrayIndex,count,r){
      var i = 0,
        k = 0,
        combArray = [],
        _sum = 0,
        _cca = [],
        _cache = [];
      
      if(count == _returnMark){
        return;
      }
      // è·å–å½“å‰çš„è®¡æ•°æ€»å’Œ
      // è¿™é‡Œæ’åºçš„ä¸æ˜¯åŸæ¥çš„æ•°ç»„,è€Œæ˜¯æ±‚çš„ç´¢å¼•åçš„æ•°ç»„
      combArray = util.getCombination(arrayIndex,count);
      console.log('getCombinationè¿”å›çš„å€¼ï¼š', combArray);
      for(i = 0;i<combArray.length;i++){
        _cca = combArray[i];
        _sum = 0;
        _cache = [];
        // calculate the sum from combination
        for(k = 0;k<_cca.length;k++){
          _sum += array[_cca[k]];
          _cache.push(array[_cca[k]]);
        }
        if(Math.abs(_sum-sum) <= _tolerance){
          r.push(_cache);
        }      
      }

      logic.core(array,sum,arrayIndex,count-1,r);
    }
  },
    r = [],
    _array = [],
    _targetCount = 0,
    _tolerance = 0,
    _returnMark = 0;
    
    // check data
  _targetCount = targetCount || _targetCount;
  _tolerance = tolerance || _tolerance;
  
  _array = logic.init(array,sum);
  if(_targetCount){
      _returnMark = _targetCount-1;
  }
  console.log('_targetCountçš„å€¼:', _targetCount);
  console.log('_returnMarkçš„å€¼:', _returnMark);

  logic.core(_array,sum,util.getArrayIndex(_array),(_targetCount || _array.length),r);

  return r;
}
var res1 = getCombBySum([1, 2, 3, 4, 5], 6, null, 2);
// var res2 = getCombBySum([1, 2, 3, 4, 5, 9, 7, 10, 8], 9, null, null);
console.log(res1);
// console.log(res2);
```